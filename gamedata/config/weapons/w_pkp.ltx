; Пулемет ПКП «Печенег» (6П41)
; Модель/текстуры - Vostok Games
; Портирование с ЗП - Marafon6540
; Конфиг/настройки/перекомпоновка - sto1en
; Руки OGSE Rastaman_vip74
;-----------------------------------------------------------------------------------
; Вместо пулемента Диггера Юры
;========================================================================================
[wpn_pkm_digger]:identity_immunities,base_wpn_zoom
;-----------------------------------------------------------------------------------
GroupControlSection		= spawn_group
discovery_dependency	= 
$spawn              	= "weapons\wpn_pkm_digger"	; name and section in level editor
$npc					= on				
$prefetch 				= 8
scheduled				= off               ;[] option for ALife Simulator
cform               	= skeleton
class               	= WP_LR300			; class of the weapon that corresponding to CPP class
min_radius          	= 0					; [] for AI
max_radius          	= 150				; [] for AI

;description				= w_pecheneg_desc
description			        = wpn_pkm_digger
	
ef_main_weapon_type		= 2
ef_weapon_type			= 6

;-----------------------------------------------------------------------------------
holder_range_modifier	= 1.0
holder_fov_modifier		= 1.0
;-----------------------------------------------------------------------------------

cost					= 18000				; the price of the item
weapon_class			= assault_rifle		; the type of the box that will be used in buy-menu in multiplayer mode	
	
ammo_elapsed			= 100				; obsolete
ammo_mag_size			= 150				; clip (magazine) size
fire_modes				= -1
	
ammo_class				= ammo_7.62x54_7h1, ammo_7.62x54_7h14, ammo_7.62x54_ap   	; name of the ltx-section of used ammo 

hand_dependence			= 1					; how many hands (1 or 2) we used to hold weapon in
single_handed			= 0
	
slot 					= 2					; number of slot in inventory we put weapon in (1 - knife slot, 2 - pistol, 3 - rifle, 4 - grenade, 5 - apparatus)
animation_slot			= 2					; type of the animation that will be used

;inv_name	        	= w_pecheneg		; name in inventory	
;inv_name_short			= w_pecheneg_s
inv_name			= wpn_pkm_digger_name
inv_name_short		= wpn_pkm_digger_name
inv_weight				= 7.5

inv_grid_width			= 6
inv_grid_height			= 2
inv_grid_x				= 27	;20
inv_grid_y				= 34	;26

kill_msg_x				= 0
kill_msg_y				= 123
kill_msg_width			= 69
kill_msg_height			= 30

;false - запрещение режима Sprint (для ГГ)
sprint_allowed		= true

;-----------------------------------------------------------------------------------
;params of weapon recoil
fire_dispersion_base			= 0.19   ;угол (в градусах) базовой дисперсии оружия (оружия зажатого в тисках)
control_inertion_factor			= 1.25f
disp_rate 						= 1.82

;отдача
cam_relax_speed					= 5		;скорость возврата в исходное положение
cam_relax_speed_ai				= 120.75
cam_dispersion					= 0.4	;увеличения угла (в градусах) с каждым выстрелом
cam_dispersion_inc				= 0.2	;увеличениe cam_dispersion с каждым выстрелом
cam_dispertion_frac				= 0.45	;ствол будет подыматься на cam_dispersion*cam_dispertion_frac +- cam_dispersion*(1-cam_dispertion_frac)
cam_max_angle					= 10	;максимальный угол отдачи
cam_max_angle_horz				= 9		;(degree) maximum shot horizontal degree
cam_step_angle_horz				= 2.1	;(degree) size of step camera moved in horizontal position while shooting

fire_dispersion_condition_factor = 4.5    ;увеличение дисперсии в процентах при максимальном износе
misfire_probability				= 0.001  ;вероятность осечки при максимальном износе 
misfire_condition_k				= 0.05
condition_shot_dec				= 0.0003  ;увеличение износа при каждом выстреле
;-----------------------------------------------------------------------------------
direction 				= 0, 0, 1

fire_point             	= 0.0, 0.27109, 0.87317			; position (3rd person view) for particles of fire

flame_particles			= amik\weapons\flame_particles\flame_particles_04 ;weapons\generic_weapon03		; particles for shooting effects
smoke_particles			= amik\weapons\smoke_particles\smoke_particles_02 ;weapons\generic_shoot_00
grenade_flame_particles	= weapons\generic_weapon01
	
shell_point		 		= 0.00, 0.262, 0.189			; position (3rd person view) for shell to throw out
shell_dir		 		= 0.0, 1.0, 0.0
shell_particles	 		= amik\weapons\7_62x54\7_62x54_l		; name of the particles for shells

PDM_disp_base = 3.5
PDM_disp_vel_factor = 2.3
PDM_disp_accel_factor = 1.3
PDM_crouch = 2.5
PDM_crouch_no_acc = 1.8

;------------------------------------- ТТХ --------------------------------------
hit_power               = 0.95		;ОГСЕ 1.23
hit_impulse             = 30
hit_type                = fire_wound
hit_rate                = 1.85

fire_distance           = 250
bullet_speed            = 870
rpm                     = 750
rpm_empty_click         = 200

use_aim_bullet = false;			= false
time_to_aim				= 1.0	

silencer_hit_power     	= 0.90		;ОГСЕ  1.12
silencer_hit_impulse	= 30
silencer_fire_distance  = 200
silencer_bullet_speed	= 600
;--------------------------------------------------------------------------------

hud				= wpn_pkp_hud				; name of the section of the hud

;normal         = 0, 1, 0
position		= -0.02, 0.01, -0.025		; позиция для держания в руках у НПС. 1 - перед пузом/за спиной.  2 - вверх/вниз. 3 - влево/вправо
orientation		= 0, 0, 0					; (3rd person view)

;--STRAP PARAMETERS-----------------------------------------------------------------
strap_position          = -0.1065, -0.0350, 0.0
strap_orientation		= -10, -5, 10
strap_bone0				= bip01_spine2
strap_bone1				= bip01_spine1

startup_ammo			= 100
visual					= weapons\pecheneg\wpn_pecheneg.ogf

light_color				= 0.6,0.5,0.3
light_range				= 5
light_var_color			= 0.05
light_var_range			= 0.5
light_time				= 0.2

ph_mass					= 7.5

;addons
scope_status			= 0			;2 ВЫЛЕТАЕТ (в модели НЕТ кости wpn_scope)
silencer_status			= 0
grenade_launcher_status	= 0

scope_mount_status		= 0
grip_status				= 0
magazine_status			= 0

scope_name       		= wpn_scope		;аддоны ОГСЕ д/б = wpn_scope	;модель = wpn_addon_scope_1p29	
scope_x					= 0
scope_y					= 0
silencer_name			= wpn_sil		;!!!нет в модели wpn_addon_silencer
silencer_x				= 0
silencer_y				= 0
grenade_launcher_name	= wpn_grenade_launcher
grenade_launcher_x		= 0
grenade_launcher_y		= 0

script_binding  = ogse_bind_weapon.init
;скрытые (управляемые) кости: 
managed_bones = eotech
;прицелы на штатную планку
;wpn_addon_scope_1p29    	= wpn_pkp_1p29

zoom_enabled			= true		; (on,off)zoom mode (right mouse button)

;ПРОБУЕМ пока один набор на всех прописать напрямую (ВРЕМЕННО, пока KRodin в движок всё перенести не раздуплится)
;highlight_addons = fake_wpn_addon_scope_1p29 
;при торговле обрабатывает не все аддоны из списка, а только те прицелы, что в секции ствола.
;С патронами, глушаками и подстволами всё нормально - они же движковые (не имеют фейков).
;Магазины, прицельные планки и ручки почему-то не обрабатываются. 
;при закрытии инвентаря фейки превращаются в не фейки, и в торговле поэтому глюки
;Флаг, позволяющий для всех предметов реагировать на флаг FRuckDefault. Если флаг установлен, хабар будет подбираться в рюкзак, а не в слот по умолчанию.
default_to_ruck = true

;--------------------------------------------------------------------------------
;-- FIRE QUEUE PARAMETERS
;--------------------------------------------------------------------------------
weapon_min_queue_size_far		= 15
weapon_max_queue_size_far		= 15
weapon_min_queue_interval_far	= 500	
weapon_max_queue_interval_far	= 700	

weapon_min_queue_size_medium	= 30
weapon_max_queue_size_medium	= 30
weapon_min_queue_interval_medium= 400	
weapon_max_queue_interval_medium= 600	

weapon_min_queue_size_close		= 100
weapon_max_queue_size_close		= 100
weapon_min_queue_interval_close	= 300
weapon_max_queue_interval_close	= 500

;-- ЗВУКИ -----------------------------------------------------------------------
snd_draw		= weapons\pkm\pkm_draw.ogg
snd_holster		= weapons\pkm\pkm_holster.ogg
snd_shoot		= weapons\pecheneg\pecheneg_shoot.ogg
snd_shoot1		= weapons\pecheneg\pecheneg_shoot.ogg
snd_shoot2		= weapons\pecheneg\pecheneg_shoot.ogg
snd_shoot3		= weapons\pecheneg\pecheneg_shoot.ogg
snd_empty		= weapons\pkm\pkm_empty.ogg
snd_reload		= weapons\pecheneg\pecheneg_reload.ogg
;--------------------------------------------------------------------------------

;silencer_flame_particles        = weapons\generic_weapon01
silencer_smoke_particles         = weapons\generic_shoot_00

silencer_light_color             = 0.6,0.5,0.3
silencer_light_range             = 0.01
silencer_light_var_color         = 0.05
silencer_light_var_range         = 0.5
silencer_light_time              = 0.2

;========================================================================================
[wpn_pkp_hud]
;-----------------------------------------------------------------------------
allow_inertion		= true

shell_point			= 0.121, -0.058, -0.110
shell_dir			= 0.0, 1.0, 0.0

fire_point			= 0.02, 0.014, 0.04
fire_point2			= 0.0, 0.0, 0.0

fire_bone			= wpn_body

position			= 0.021, -0.124, 0.18
orientation			= 0.5, 0.0, 0.0

visual				= weapons\pecheneg\wpn_pecheneg_hud.ogf

anim_draw			= pecheneg_draw
anim_holster		= pecheneg_holster
anim_idle			= pecheneg_idle
anim_idle_aim		= pecheneg_aim
anim_idle_sprint	= pecheneg_sprint
anim_reload			= pecheneg_reload_new
anim_shoot			= pecheneg_shoot

;смещения HUD для режима приближения
;+Для опптики Тюльпана
;+zoom_offset			= -0.128700,-0.007300,-0.182000
;+zoom_rotate_x		= 0.006500
;+zoom_rotate_y		= 0.005700
zoom_offset			= -0.129200,0.021700,-0.182000
zoom_rotate_x		= -0.009000
zoom_rotate_y		= 0.009200
;+Для механического Тюльпана
;+second_zoom_offset			= -0.129200,0.021700,-0.182000
;+second_zoom_rotate_x		= -0.009000
;+second_zoom_rotate_y		= 0.009200

;прячем перекрестие прицела в зуме
zoom_hide_crosshair	= true

;время поворота HUD (сек)
zoom_rotate_time	= 0.3
rotate_time			= 0.3

;========================================================================================
[wpn_pkm_digger_repair]
tech_complication 		= 800
repair_compatibility 	= pkm


;========================================================================================
;KRodin: стандартный ПКМ тоже на ПКП заменим, у старого уж больно страшная модель и руки.
[wpn_pkm]:wpn_pkm_digger
cost           = 14000

description    = enc_weapons1_wpn-pkm
inv_name       = wpn-pkm_name
inv_name_short = wpn-pkm_name

inv_grid_width  = 6	 ; position and size of the icon that will be used to display weapon in the inventory menu
inv_grid_height = 2	 ; all icons are on the texture ui_icon_equipment.dds,   
inv_grid_x      = 0	 ; position and size are in terms of 64x64 squares
inv_grid_y      = 39

ammo_mag_size  = 100
rpm            = 650

keep_visual = true ;Костыль чтоб старые сейвы работали
;========================================================================================


;-----------------------------------------------------------------------------------
;Сменные аддоны ОГСЕ
;-----------------------------------------------------------------------------------
;управляемые В СЕКЦИЯХ АДДОНОВ кости с привязкой by k01jan:
;  eotech			1П29 (УСП-1 "Тюльпан") х4
;-----------------------------------------------------------------------------------


;-----------------------------------------------------------------------------------
; служебные секции описателей прицелов
;-----------------------------------------------------------------------------------
; 1П29 (УСП-1 "Тюльпан") х4
[pkp_1p29]
;тест мех.прицела force_remove_texture = true
bones         = eotech
;штатный механический прицел (не настроен)
zoom_offset			= -0.128700,-0.007300,-0.182000
zoom_rotation		= 0.006500,0.005700
[pkp_1p29_p]
scope_name               = wpn_addon_scope_1p29
scope                    = pkp_1p29

;-----------------------------------------------------------------------------------
; секции оружия с аддонами
;-----------------------------------------------------------------------------------
; +УСП-1
[wpn_pkp_1p29]:wpn_pkm_digger,pkp_1p29_p
;_cost					 = 4500
;_inv_weight				 = 3.73
[wpn_pkp_1p29_repair]:wpn_pkm_digger_repair
